<html lang="en-GB">
  <head>
    <meta charset="utf-8">
    <!-- Built with 11ty - 2022-11-17 19:22 -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="King's Digital Lab, King's College London">
    <meta name="description" content="This AHRC-funded research project will create an online digital edition of all four of Alice Wandesford Thornton's autobiographical manuscripts.">
    
    <meta property="og:image" content="https://thornton.kdl.kcl.ac.uk/assets/img/logos/KCL-square.svg">
    <meta property="og:description" content="This AHRC-funded research project will create an online digital edition of all four of Alice Wandesford Thornton's autobiographical manuscripts.">
    <meta property="og:title" content="Story 2">


    <title>Story 2 | Alice Thornton</title>

    <link rel="stylesheet" href="/bcc-11ty/assets/css/style.css?ts=1668712963">
    <link rel="stylesheet" href="/bcc-11ty/assets/node_modules/leaflet/dist/leaflet.css"  />
    <script src="/bcc-11ty/assets/js/navbar-toggle.js?ts=1668712963"></script>
  </head>
  <body class="type-stories slug-story2">
    <header>


      <a href="/">Movement and Common World in Early America</a>
      <nav>
        <input id="sitenav" type="checkbox" />
        <label aria-label="Menu" class="sitenav-label" for="sitenav"> </label>
        <ul>
          
          <li class="is-active">
            <a href="/bcc-11ty/">Home</a>
          </li>
          
          <li class="">
            <a href="/bcc-11ty/about/">About</a>
          </li>
          
          <li class="is-active">
            <a href="/bcc-11ty/stories/">Stories</a>
          </li>
          

        </ul>
      </nav>
</header>


    

<input id="pagenav-toggle" type="checkbox"/>
<nav id="pagenav" tabindex="0">
    <ol>
        <li><a href="overview">Overview</a></li>
        <li><a href="stories">Stories</a></li>
        <ol>
            <li><a href="../">Introduction</a></li>
            
                <li><a href="/bcc-11ty/stories/story1/">Story 1: Homelands</a></li>
                <ol>
                    
                        <li><a href="/bcc-11ty/stories/story1/#first-part">First Part</a></li>
                    
                        <li><a href="/bcc-11ty/stories/story1/#second-part">Second part</a></li>
                    
                        <li><a href="/bcc-11ty/stories/story1/#third-part">Third part</a></li>
                    
                </ol>
            
                <li><a href="/bcc-11ty/stories/story2/">Story 2</a></li>
                <ol>
                    
                        <li><a href="/bcc-11ty/stories/story2/#first-part">First Part</a></li>
                    
                        <li><a href="/bcc-11ty/stories/story2/#second-part">Second part</a></li>
                    
                </ol>
            
        </ol>
        <li><a href="explore">Explore</a></li>
    </ol>
</nav>
<main>
    <label role="region" aria-label="pagenavigation" for="pagenav-toggle" id="pagenav-label">Page Navigation</label>
    <div id="basemap" class="basemap">
    </div>
    <article tabindex="0">
        <h2>Story 2</h2>
        <h2>Our thrilling story continues</h2>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. In fermentum et sollicitudin ac. Aliquam id diam maecenas ultricies mi eget. Ultricies integer quis auctor elit sed vulputate mi sit amet. Dui faucibus in ornare quam viverra. Mauris ultrices eros in cursus turpis. Orci eu lobortis elementum nibh tellus. Volutpat sed cras ornare arcu. Semper quis lectus nulla at. Blandit cursus risus at ultrices mi tempus imperdiet nulla malesuada. Sit amet commodo nulla facilisi nullam vehicula ipsum a.</p>
<p>Eget nullam non nisi est sit amet facilisis magna. Sed blandit libero volutpat sed cras. Quis eleifend quam adipiscing vitae proin sagittis nisl rhoncus. Euismod in pellentesque massa placerat duis. Ut aliquam purus sit amet. Sed euismod nisi porta lorem. Facilisis gravida neque convallis a cras. Pretium aenean pharetra magna ac placerat vestibulum lectus. Tortor at risus viverra adipiscing at in tellus. Pretium vulputate sapien nec sagittis aliquam malesuada. Felis eget nunc lobortis mattis aliquam faucibus purus in. Praesent tristique magna sit amet purus gravida quis blandit. Consectetur a erat nam at lectus urna duis. Ut enim blandit volutpat maecenas volutpat blandit aliquam. Vestibulum rhoncus est pellentesque elit ullamcorper. Orci ac auctor augue mauris augue neque gravida. Aliquam malesuada bibendum arcu vitae elementum curabitur vitae nunc. Eget gravida cum sociis natoque penatibus et magnis.</p>

    </article>

    <script type="text/javascript" src="/bcc-11ty/assets/node_modules/leaflet/dist/leaflet.js"></script>
    <script type="text/javascript" src="/bcc-11ty/assets/js/leaflet/plugins/L.Control.Appearance.js"></script>

    <script>
        let overlay;
        let geojson_uri = ["/bcc-11ty/assets/json/BCC_combined.json"];
        let shapeLayers = null;
        let shapesByFrameLink = {};
        let story_id = 2;
        let map;

        // fillColor: '#ff7800', fill: true
        let highlightLineStyle = {
            stroke: true,
            color: '#0000ff',
            weight: 5,
            opacity: 0.6,
        };

        // color: 'rgba(0,0,0,0)',
        let defaultLineStyle = {
            stroke: true,
            color: '#0000ff',
            weight: 5,

            fill: false,
        };

        async function loadShapeFile(shape_url) {
            let response = await fetch(shape_url);
            let data = await response.json();
            return data;
        }

        function onEachFeature(feature, layer) {
            // does this feature have a property named popupContent?
            if (feature.properties && (feature.properties.map_text || feature.properties.norm_text)) {
                if (feature.properties.map_text) {
                    layer.bindPopup(feature.properties.map_text);
                } else {
                    layer.bindPopup(feature.properties.norm_text);
                }
            }

        }

        /**
         * Load all shape files asynchronously
         */
        async function loadShapes(shape_urls) {
            let shapePromises = [];
            let shapeGeoJSON = [];
            let storyFeatures = [];

            let shapeLayer = {};
            for (let u = 0; u < shape_urls.length; u++) {
                shapePromises.push(loadShapeFile(shape_urls[u]));
            }
            await Promise.all(shapePromises).then((values) => {
                for (let v = 0; v < values.length; v++) {
                    shapeGeoJSON.push(...values[v].features);
                }
            });
            let unlinkedShapes = [];
            // Arrange into stories and default layer

            for (let s = 0; s < shapeGeoJSON.length; s++) {
                let feature = shapeGeoJSON[s];
                if (feature.properties) {
                    if (feature.properties.story_link === story_id) {
                        storyFeatures.push(feature);
                    }
                    if (feature.properties.frame_link) {

                    }
                    /*let frame_link = feature.properties.frame_link;
                    if (shapesByFrameLink[frame_link]) {
                        shapesByFrameLink[frame_link].push(feature);
                    } else {
                        shapesByFrameLink[frame_link] = [feature]
                    }*/
                }
            }

            console.log(storyFeatures);

            return storyFeatures;
        }


        async function init() {
            let mapMinZoom = 1;
            let mapMaxZoom = 11;
            map = L.map('basemap');

            //L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
            overlay = L.tileLayer('https://cawm.lib.uiowa.edu/tiles/{z}/{x}/{y}.png', {
                minZoom: mapMinZoom, maxZoom: mapMaxZoom,
                opacity: 1
            }).addTo(map);

            // Initial view
            // This could be changed based on get string etc.
            map.setView([, ], );

            await loadFeatures();

            /*
            let baseMaps = {};
            let uneditableOverlays = {};
            let overlayMaps = {};

            let appearanceControl = L.control.appearance(baseMaps, overlayMaps, uneditableOverlays, {
                opacity: true,
                remove: true,
                color: true,
            });
            appearanceControl.addTo(map);*/
        }

        async function loadFeatures() {
            storyFeatures = await loadShapes(geojson_uri);
            shapeLayer = L.geoJSON(storyFeatures, {
                style: defaultLineStyle,
                onEachFeature: onEachFeature,
            }).addTo(map);


        };


        init();
    </script>
</main>

    <footer class="footer">
  <div class="has-text-centered">
    <h2 class="small-heading">Partners and Funders</h2>
    <div class="gallery-by-4 logos">
      <a href="//www.ukri.org/about-us/ahrc/">
        <img
          src="/bcc-11ty/assets/img/logos/UKRI_AHR_Council-Logo_Square-RGB.png"
          alt="Arts and Humanities Council (AHRC)"
          width="50"
          height="50"
        />
      </a>

      <a href="//kdl.kcl.ac.uk/">
        <img
          src="/bcc-11ty/assets/img/logos/KCL-square.svg"
          alt="King's Digital Lab, King's College London"
          width="50"
          height="50"
        />
      </a>
    </div>
    <p>
      <a href="/accessibility/">Accessibility Statement</a> |
      <a href="/credits/">Credits &amp; Acknowledgements</a>
    </p>
    <p class="small">
      Designed, developed and maintained by <a href="//kdl.kcl.ac.uk/">KDL</a>.
    </p>
  </div>
</footer>

  </body>
</html>
